Using Single-Row Functions to Customize Output

SQL Functions
  -- can be used to do the following:
     1. Perform calculations on data
     2. Modify individual data items
     3. Manipulate output for groups of rows
     4. Format dates and numbers for display
     5. Convert column data types
  -- ¥i¥H±µ¨°ׁ¼ֶ¿י₪J(0/1/¦h­׃),¦‎¥u¯א/₪@©w¦^¶ַ1­׃µ²×G
     func(arg1,arg2,arg3,...)=>result

Two Types of SQL Functions
Single-row functions --
  1. These functions operate on single rows only and return one result per row.
     ₪@µ§row¦^¶ַ₪@­׃µ²×G¡C
  2. They accept one or more arguments and return one value for each row that 
     is returned by the query. An argument can be one of the following:
	 2.1. User-supplied constant
	 2.2. Variable value
	 2.3. Column name
	 2.4. Expression
  3. Features of single-row functions include:
     3.1. Acting on each row that is returned in the query
	 3.2. Returning one result per row
	 3.3. Possibly returning a data value of a different type than the one that
          is referenced.
	 3.4. Possibly expecting one or more arguments
	 3.5. Can be used in SELECT, WHERE, and ORDER BY clauses
	 3.6. Can be nested
  4. There are different types of single-row functions.
     -- Character functions
	    Accept character input and can return both character and number values
	 -- Number functions
	    Accept numeric input and return numeric values
	 -- Date functions
	    Operate on values of the DATE data type (All date functions return a 
		value of the DATE data type except the MONTHS_BETWEEN function, which
		returns a number.)
	 -- Conversion functions
	    Convert a value from one data type to another
	 -- General functions
	    NVL
		NVL2
		NULLIF
		COALESCE
		CASE
		DECODE
Multiple-row functions --
  1. Fuctions can manipulate groups of rows to give one resultper group of rows.
     ¦hµ§row¦^¶ַ₪@­׃µ²×G¡C
     These functions also known as group functions.
	 
Character Functions
  Character Functions
  שששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששש
  Case-conversion functions         Character-manipulation functions
  ¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w
  LOWER                             CONACT
  UPPER                             SUBSTR
  INIICAP                           LENGTH
                                    INSTR
                                    LPAD | RPAD
									TRIM
									REPLACE
  שששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששש
  
  Case-conversion functions
  שששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששש
  Function                   Result
  ¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w
  LOWER( 'SQL Course' )      sql course
  UPPER( 'SQL Course' )      SQL COURSE
  INIICAP( 'SQL Course' )    Sql Course
  שששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששש
  Examples:
     SELECT 'The job id for '||UPPER(last_name)||' is '
       ||LOWER(job_id) AS "EMPLOYEE DETAILS"
     FROM employees;
	 
	 SELECT employee_id, last_name, department_id
	 FROM employees
	 WHERE last_name = 'higgins';
	 
	 SELECT employee_id, last_name, department_id
	 FROM employees
	 WHERE LOWER( last_name ) = 'higgins';
	 
	 SELECT employee_id, UPPER( last_name ), department_id
	 FROM employees
	 WHERE INITCAP( last_name ) = 'Higgins';

  Examples: ¸ֹ¥R
     SQL> SELECT UPPER('hello world'),LOWER('Hello WorLD'),INITCAP('HELLO world')
        2 FROM dual;

     UPPER('HELL LOWER('HELL INITCAP('HE  
     ----------- ----------- -----------
     HELLO WORLD hello world Hello World
     
     -INITCAP±N²ִ₪@­׃charֵ¦¨₪j¼g,¨ה¾l¬°₪p¼g

     SQL> SELECT last_name,first_name,last_name||first_name lf_name,
                 CONCAT(last_name,first_name) concat_name
       2  FROM   hr.employees
       3  WHERE  department_id=90;
     
     LAST_NAME     FIRST_NAME      LF_NAME           CONCAT_NAME
     ------------- --------------- ----------------- ---------------------------
     King          Steven          KingSteven        KingSteven
     Kochhar       Neena           KochharNeena      KochharNeena
     De Haan       Lex             De HaanLex        De HaanLex

  Character-manipulation functions
  שששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששש
  Function                               Result
  ¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w
  CONCAT( 'Hello', 'World' )             HelloWorld
  SUBSTR( 'HelloWorld', 1, 5 )           Hello
  LENGTH( 'HellowWorld' )                10
  INSTR( 'HellowWorld', 'W' )            6
  LPAD( salary, 10, '*' )                *****24000
  RPAD( salary, 10, '*' )                24000*****
  REPLACE( 'JACK and JUE', 'J', 'BL')    BLACK and BLUE
  TRIM( 'H' FROM 'HelloWorld' )          elloWorld
  שששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששש
  Examples:
     SELECT employee_id, CONACT( first_name, last_name) NAME,
	        job_id, LENGTH( last_name ), INSTR( last_name, 'a' ) "Contains 'a'?"
	 FROM employees
	 WHERE SUBSTR(job_id, 4) = 'REP';
	 
     SELECT employee_id, CONACT( first_name, last_name) NAME,
	        LENGTH( last_name ), INSTR( last_name, 'a' ) "Contains 'a'?"
	 FROM employees
	 WHERE SUBSTR( last_name, -1, 1 ) = 'n';

  Examples: ¸ֹ¥R
     SQL> SELECT 'A'||'_B',CONCAT('A','_B') FROM dual;

     'A' CON
     --- ---
     A_B A_B

     SQL> SELECT 'A'||'_B'||'_C',CONCAT('A','_B','_C') FROM dual;
     SELECT 'A'||'_B'||'_C',CONCAT('A','_B','_C') FROM dual
                       *
     ERROR at line 1:
     ORA-00909: invalid number of arguments

     - ¨ח¼ֶ×÷µ²×G¥i¥H³Q·ם§@¥t₪@­׃¨ח¼ֶ×÷¿י₪J°ׁ¼ֶ
       --> ¨ח¼ֶ±_×¬₪ֶ
     SQL> SELECT 'A'||'_B'||'_C',CONCAT(CONCAT('A','_B'),'_C') FROM dual; 

     'A'|| CONCA
     ----- -----
     A_B_C A_B_C

     SQL> SELECT last_name,LENGTH(last_name) 
        2 FROM hr.employees 
        3 WHERE department_id=90;

     LAST_NAME            LENGTH(LAST_NAME)
     -------------------- -----------------
     King                                 4  -- ´X­׃¦r,₪£÷₪@­׃¦r¥ׁ´X­׃character
                                                ²ױ¦¨.₪@­׃character¥i¯א¥ׁ¦h­׃
                                                bytes²ױ¦¨.
     Kochhar                              7
     De Haan                              7  -- ×ֵ¥ױ₪]÷ג

     SQL> SELECT LENGTH('¥ׂ°©₪ו') 
        2 FROM dual;

        ENGTH('¥ׂ°©₪ו')
        ----------------
                       3  -- ´X­׃characters

     SQL> SELECT LENGTHB('¥ׂ°©₪ו') 
        2 FROM dual;

        LENGTHB('¥ׂ°©₪ו')
        -----------------
                        6  -- ´X­׃Bytes

     SQL> SELECT LENGTHB('ABC') FROM dual;
     
     LENGTHB('ABC')
     --------------
                  3
     			                            ¢z¢w¢w ±q²ִ´X­׃¦r¶}©l
                                            ¡ץ
     SQL> SELECT last_name,SUBSTR(last_name,1,3) FROM hr.employees 
        2 WHERE department_id=90;             ¡פ
                                              ¢|¢w¢w ֵ×¨ת´X­׃¦r
     LAST_NAME            SUBSTR
     -------------------- ------
     King                 Kin
     Kochhar              Koc
     De Haan              De
     
     SQL> SELECT last_name,SUBSTR(last_name,2,3) FROM hr.employees 
        2 WHERE department_id=90;
     
     LAST_NAME            SUBSTR
     -------------------- ------
     King                 ing
     Kochhar              och
     De Haan              e H
                                  ¦r¦ך       ¢z¢w¢w ¥ׁ­‏¸ּ¶}©l÷ג
                                   ¡ץ         ¡ץ   (¥¿¼ֶ:¥ׁ¥×¦V¥k,­t¼ֶ:¥ׁ¥k¦V¥×)
     SQL> SELECT last_name,SUBSTR(last_name,-3,3) FROM hr.employees
        2 WHERE department_id=90;	           ¡פ
                                               ¢|¢w¢w ¦V¥kֵ×´X­׃¦r 
     LAST_NAME            SUBSTR
     -------------------- ------
     King                 ing
     Kochhar              har
     De Haan              aan
     
     SQL> SELECT SUBSTR('¬°׃¥ׂ°©₪ו',1,3),SUBSTRB('¬°׃¥ׂ°©₪ו',1,3) FROM dual;
     
     SUBSTR SUB
     ------ ---
     ¬°׃¥ׂ ¬
     
     SQL> SELECT SUBSTR('¬°׃¥ׂ°©₪ו',1,2),SUBSTRB('¬°׃¥ׂ°©₪ו',1,2) FROM dual;
     
     SUBS SU
     ---- --
     ¬°׃ ¬
     
     SQL> SELECT last_name,INSTR(last_name,'i') FROM hr.employees 
        2 WHERE department_id=90;
     
     LAST_NAME            INSTR(LAST_NAME,'I')
     -------------------- --------------------
     King                                    2
     Kochhar                                 0
     De Haan                                 0
     
     SQL> SELECT last_name,INSTR(last_name,'h') FROM hr.employees 
        2 WHERE department_id=90;
     
     LAST_NAME            INSTR(LAST_NAME,'H')  <--¦¹³B÷§@column heading,·|¦°
     -------------------- --------------------     ±Nselect listֵ¦¨₪j¼g.      
     King                                    0
     Kochhar                                 4
     De Haan                                 0  <--¦]¬°©ׂ§ה´M×÷literal¬°₪p¼gh
     					                           ¥ׁ¥×ֳה×÷²ִ´X­׃¦r¶}©l¦V¥k
                                                   
     SQL> SELECT last_name,INSTR(last_name,'h',1,1) FROM hr.employees
        2 WHERE department_id=90;                ¡פ
                                                 ¢|¢w¢w ¥X²{×÷²ִ´X¦¸
     LAST_NAME            INSTR(LAST_NAME,'H',1,1)
     -------------------- ------------------------
     King                                        0
     Kochhar                                     4
     De Haan                                     0
     
     SQL> SELECT last_name,INSTR(last_name,'h',4,1) FROM hr.employees 
        2 WHERE department_id=90;
     
     LAST_NAME            INSTR(LAST_NAME,'H',4,1)
     -------------------- ------------------------
     King                                        0
     Kochhar                                     4
     De Haan                                     0
     
     SQL> SELECT last_name,INSTR(last_name,'h',1,2) FROM hr.employees 
        2 WHERE department_id=90;
     
     LAST_NAME            INSTR(LAST_NAME,'H',1,2)
     -------------------- ------------------------
     King                                        0
     Kochhar                                     5
     De Haan                                     0
     
     SQL> SELECT last_name,INSTR(last_name,'h',5,1) FROM hr.employees 
        2 WHERE department_id=90;
     
     LAST_NAME            INSTR(LAST_NAME,'H',5,1)
     -------------------- ------------------------
     King                                        0
     Kochhar                                     5
     De Haan                                     0
     
     SQL> SELECT last_name,INSTR(last_name,'h',6,1) FROM hr.employees 
        2 WHERE department_id=90;
     
     LAST_NAME            INSTR(LAST_NAME,'H',6,1)
     -------------------- ------------------------
     King                                        0
     Kochhar                                     0
     De Haan                                     0
     
     SQL> SELECT INSTR('¬°׃¥ׂ°©₪ו','₪ו'),INSTRB('¬°׃¥ׂ°©₪ו','₪ו') FROM dual;
     
     INSTR('¬°׃¥ׂ°©₪ו','₪ו') INSTRB('¬°׃¥ׂ°©₪ו','₪ו')
     ------------------------ -------------------------
                            5                         9
     					   
     SQL> SELECT last_name,LPAD(last_name,10,'#'),RPAD(last_name,10,'!') 
        2 FROM hr.employees 
        3 WHERE department_id=90;
     
     LAST_NAME            LPAD(LAST_NAME,10,'# RPAD(LAST_NAME,10,'!
     -------------------- -------------------- --------------------
     King                 ######King           King!!!!!!
     Kochhar              ###Kochhar           Kochhar!!!
     De Haan              ###De Haan           De Haan!!!
     
     SQL> SELECT last_name,LPAD(last_name,10,' '),RPAD(last_name,10,' ') 
        2 FROM hr.employees 
        3 WHERE department_id=90;
     
     LAST_NAME            LPAD(LAST_NAME,10,'' RPAD(LAST_NAME,10,''
     -------------------- -------------------- --------------------
     King                       King           King
     Kochhar                 Kochhar           Kochhar
     De Haan                 De Haan           De Haan
                                   Bytes
     SQL> SELECT LPAD('¬°׃¥ׂ°©₪ו',10,'«z') FROM dual;
     
     LPAD('¬°׃
     ----------
     ¬°׃¥ׂ°©₪ו
     
     SQL> SELECT LPAD('¬°׃¥ׂ°©₪ו',20,'«z') FROM dual;
     
     LPAD('¬°׃¥ׂ°©₪ו',20
     --------------------
     «z«z«z«z«z¬°׃¥ׂ°©₪ו
     
     SQL> SELECT REPLACE('Jack and Jue','J','Bl') FROM dual;
     
     REPLACE('JACKA
     --------------
     Black and Blue
     
     SQL> SELECT TRIM('!' FROM '!Hello World!')   --±N³sִע×÷!¨ת°£,¥hְY¥B¥h§ְ
        2 FROM dual;
               --TRIM(BOTH '!' FROM '!Hello World!')
     TRIM('!'FRO
     -----------
     Hello World
     
     SQL> SELECT TRIM('!' FROM '!!!Hello World!') FROM dual;
     
     TRIM('!'FRO
     -----------
     Hello World
     
     SQL> SELECT TRIM(LEADING '!' FROM '!Hello World!') FROM dual;  --¥hְY
     
     TRIM(LEADING
     ------------
     Hello World!
     
     SQL> SELECT TRIM(TRAILING '!' FROM '!Hello World!') FROM dual; --¥h§ְ
     
     TRIM(TRAILIN
     ------------
     !Hello World

Number Functions
  Number functions
  שששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששש
  Function                Result
  ¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w
  ROUND( 45.926, 2 )      45.93
  TRUNC( 45.926, 2 )      45.92
  MOD( 1600, 300 )        100
  שששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששש
  Examples:
     SELECT ROUND( 45.923, 2 ), ROUND( 45.923, 0 ), ROUND( 45.923, -1 )
	 FROM DUAL;
  
  DUAL Table
    1. DUAL is a public table that you can use to view results from functions and
       calculations.
    2. The DUAL table is owned by the user SYS and can be accessed by all users.
    3. It contains one column, DUMMY, and one row with the value X.
    4. The DUAL table is useful when you want to return a value only once 
       ( for example, the value of a constant, pseudocolumn, or expression that 
  	   is ot derived from a table with user data).
    5. The DUAL table is generally used fro completeness of the SELECT clause 
       syntax, because both SELECT and FROM clauses are mandatory, and serveral 
  	   calculations do not need to select from th actual tables.	   
     
       SELECT TRUNC( 45.923, 2 ), TRUNC( 45.923 ), TRUNC( 45.923, -1 )
	   FROM DUAL;
       
	   SELECT last_name, salary, MOD( salary, 5000 )
	   FROM employees
	   WHERE job_id = 'SA_REP';
	 
Working with Dates
  1. The Oracle Database stores dates in an internal numeric format, representing 
     the century, year, month, day, hours, minutes, and seconds.
  2. The default display and input format for any date is DD-MM-RR.
  Examples:
     SELECT last_name, hire_date
	 FROM employees
	 WHERE hire_date < '10-FEB-88';
	
Using the SYSDATE Function
  1. SYSDATE is a function that returns:
     Date
	 Time
  2. You can use SYSDATE just as you would use any other column name.
  Examples:
     SELECT SYSDATE
     FROM dual;
  3. SYSDATE returns the current date and time set for the operating system on
     which the database resides.
  4. The CURRENT_DATE function that returns the current date in the session 
     time zone.

Arithmetic with Dates 
  שששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששש
  Operation           Result            Description
  ¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w
  date + number       Date              Adds a number of days to a date
  date - number       Date              Subtracts a number of days from a date
  date - date         Number of days    Subtracts one date from another
  date + number/24    Date              Adds a number of hours to a date
  שששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששש
  Examples:
    SELECT last_name, (SYSDATE - hire_date)/7 AS WEEKS
	FROM employees
	WHERE department_id = '90';

  NOTE:
    Your results may differ depending on the date and time set for operating 
	system of your local database when you run the SQL query.

Date-Manipulation Functions
  שששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששש
  Function                        Description
  ¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w¢w
  MONTHS_BETWEEN(date1, date2)    1. Finds the number of months between date1 
                                     and date2.
								  2. ??????????, ??????
								     ? date1 ? date2 ?, ?????
									 ? date1 ? date2 ?, ?????
  ADD_MONTHS(date, n)             1. Add n number of calendar months to date.
                                  2. The value of n number must be an integer
                                     and can be negative.
  NEXT_DAY(date, 'char')          1. Finds the date of the next specificed day 
                                     of the week ('char') following date.
								  2. The value of char may be a number 
								     representing a day or character string.
  LAST_DAY(date)                  1. Finds the date of the last day of the 
                                     month that contains date
  -----------------------------------------------------------------------------
  ROUND(date[, 'fmt'])            1. Returns date rounded to the unit that is 
                                     specificed by the format model fmt.
								  2. If the format model fmt is omitted, date
								     is rounded to the nearest day.
  TRUNC(date[, 'fmt'])            1. Returns date with the time portion of the 
                                     day truncated to the unit that is 
									 specified by the format model fmt.
								  2. If the format model fmt is omitted, date
								     is truncated to the nearest day.
  שששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששששש
  Examples:
      SELECT employee_id, hire_date, MONTHS_BETWEEN(SYSDATE, hire_date) TENURE,
	         ADD_MONTHS(hire_date, 6) REVIEW, NEXT_DAY(hire_date, 'FRIDAY'),
			 LAST_DAY(hire_date)
	  FROM employees
	  WHERE MONTHS_BETWEEN(SYSDATE, hire_date) < 150;
	  
	  SELECT employee_id, hire_date, ROUND(hire_date, 'MONTH'),
	         TRUNC(hire_date, 'MONTH')
	  FROM employees
	  WHERE hire_date LIKE '%97';
	  



  
